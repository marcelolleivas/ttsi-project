endpoints:
  - name: lojinha
    path: http://165.227.93.41/lojinha-bugada
    requests:
      - name: get_token
        path: login
        method: post
        body:
          usuariologin: marceloleivass
          usuariosenha: marcelo123
        vars:
          token: ${{ response.json()['data']['token'] }}
        tests:
          - name: validate_status_code
            assert: ${{ response.status_code == 200 }}
          - name: validate_content_type_is_json
            assert: ${{ response.headers.get('Content-Type') == "application/json" }}
      - name: insert_new_product
          headers:
            token: ${token}
          path: produto
          method: post
          body:
            produtonome: Xbox
            produtovalor: 350.00
            produtocores: [ white ]
          tests:
            - name: validate_status_code
              assert: ${{ response.status_code == 201 }}
            - name: validate_content_type_is_json
              assert: ${{ response.headers.get('Content-Type') == "application/json" }}
            - name: validate_produtoid_is_in_response
              assert: ${{ response.json()['data']['produtoid'] }}
            - name: validate_produtonome_value
              assert: ${{ response.json()['data']['produtonome'] == 'Xbox' }}
            - name: validate_produto_valor_value
              assert: ${{ response.json()['data']['produtovalor'] == 350.00 }}
            - name: validate_message_key_return
              assert: ${{ response.json()['message'] == 'Produto adicionado com sucesso' }}
            - name: validate_error_key_is_empty
              assert: ${{ response.json()['error'] == '' }}